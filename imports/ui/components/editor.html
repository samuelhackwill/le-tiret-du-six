<template name="editor">



<!-- no indentation here to remove unwanted whitespace -->
{{#if isEditor}}
<textarea class="textAreaContainer scrollBinder" disabled="{{!editMode}}">{{#each story}}{{#each data}}{{line}}
{{#each params}}{{#each objectToPairs this}}{{key}} {{value}}{{/each}}
{{/each}}
{{/each}}{{/each}}</textarea>
{{/if}}
<div class="editorContainer scrollBinder">
	<!-- story contains the data passed on in the inclusion template tag (storyEditor.html)  -->

		<div id="editorTH">
	 		{{#each story}}
		 		{{#each data}}
					<div class="lineContainer">
						<p class="line"><span class="lineIndex" data-lineIndex="{{@index}}">{{@index}}</span> {{line}} </p>

						<div class="playersContainer">
							{{#let lineIndex = @index}}
								{{#each ../../players}}
									{{#each players}}
										{{#if lineHasPlayers lineIndex}}
										<span class="playerPositionMarker" title="{{aiguebename}}" data-atIndex="{{lineIndex}}" style=" color: {{cursorColor}}"> | </span>
										{{/if}}
									{{/each}}
								{{/each}}
							{{/let}}
						</div>
						<div class="paramsContainer">
							{{#each params}}
								<div class="lineParams">
								<!-- object to pairs is a global template (app_body.js) that converts "this" into an object with key & value -->
								{{#each objectToPairs this}}
									<p class="params">
										<span class="lineKey {{key}}">{{key}}</span>
										<span class="lineValue" id={{key}}.{{value}}>{{value}}</span>
									</p>
								{{/each}}
								</div>
							{{/each}}
						</div>
					</div>
				{{/each}}
			{{/each}}
		</div>
	</div>
</template>
